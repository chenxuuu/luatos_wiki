spi - spi操作库
===============

spi.setup(id, cs, CPHA, CPOL, dataw, bandrate, bitdict, ms, mode)
-----------------------------------------------------------------

设置并启用SPI

**参数**

========== ================================================
传入值类型 解释
========== ================================================
int        SPI号,例如0
int        CS 片选脚,暂不可用,请填nil
int        CPHA 默认0,可选0/1
int        CPOL 默认0,可选0/1
int        数据宽度,默认8bit
int        波特率,默认2M=2000000
int        大小端, 默认spi.MSB, 可选spi.LSB
int        主从设置, 默认主1, 可选从机0. 通常只支持主机模式
int        工作模式, 全双工1, 半双工0, 默认全双工
========== ================================================

**返回值**

========== ========================
返回值类型 解释
========== ========================
int        成功返回0,否则返回其他值
========== ========================

**例子**

.. code:: lua

   无

--------------

spi.close(id)
-------------

关闭指定的SPI

**参数**

========== ===========
传入值类型 解释
========== ===========
int        SPI号,例如0
========== ===========

**返回值**

========== ========================
返回值类型 解释
========== ========================
int        成功返回0,否则返回其他值
========== ========================

**例子**

.. code:: lua

   无

--------------

spi.transfer(id, send_data)
---------------------------

传输SPI数据

**参数**

========== ============
传入值类型 解释
========== ============
int        SPI号,例如0
string     待发送的数据
========== ============

**返回值**

========== ==============================
返回值类型 解释
========== ==============================
string     读取成功返回字符串,否则返回nil
========== ==============================

**例子**

.. code:: lua

   无

--------------

spi.recv(id, size)
------------------

接收指定长度的SPI数据

**参数**

========== ===========
传入值类型 解释
========== ===========
int        SPI号,例如0
int        数据长度
========== ===========

**返回值**

========== ==============================
返回值类型 解释
========== ==============================
string     读取成功返回字符串,否则返回nil
========== ==============================

**例子**

.. code:: lua

   无

--------------

spi.send(id, data)
------------------

发送SPI数据

**参数**

========== ============
传入值类型 解释
========== ============
int        SPI号,例如0
string     待发送的数据
========== ============

**返回值**

========== ========
返回值类型 解释
========== ========
int        发送结果
========== ========

**例子**

.. code:: lua

   无

--------------
