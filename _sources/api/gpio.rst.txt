gpio
====

GPIO操作

gpio.setup(pin, mode, pull)
---------------------------

设置管脚功能

参数
~~~~

+-----------------------------------+-----------------------------------+
| 传入值类型                        | 解释                              |
+===================================+===================================+
| int                               | pin 针脚编号,必须是数值           |
+-----------------------------------+-----------------------------------+
| any                               | mode 输入输出模式.                |
|                                   | 数字0/1代表输出模式,nil           |
|                                   | 代表输入模式,function代表中断模式 |
+-----------------------------------+-----------------------------------+
| int                               | pull 上拉下列模式,                |
|                                   | 可以是gpio.PULLUP 或              |
|                                   | gpio.PULLDOWN,                    |
|                                   | 需要根据实际硬件选用              |
+-----------------------------------+-----------------------------------+
| int                               | irq 中断触发模式,                 |
|                                   | 上升沿gpio.RISING,                |
|                                   | 下降沿gpio.FALLING,               |
|                                   | 上升                              |
|                                   | 和下降都要gpio.BOTH.默认是RISING  |
+-----------------------------------+-----------------------------------+

返回值
~~~~~~

+-----------------------------------+-----------------------------------+
| 返回值类型                        | 解释                              |
+===================================+===================================+
| int                               | pin 针脚编号,必须是数值           |
+-----------------------------------+-----------------------------------+
| any                               | mode 输入输出模式.                |
|                                   | 数字0/1代表输出模式,nil           |
|                                   | 代表输入模式,function代表中断模式 |
+-----------------------------------+-----------------------------------+
| int                               | pull 上拉下列模式,                |
|                                   | 可以是gpio.PULLUP 或              |
|                                   | gpio.PULLDOWN,                    |
|                                   | 需要根据实际硬件选用              |
+-----------------------------------+-----------------------------------+
| int                               | irq 中断触发模式,                 |
|                                   | 上升沿gpio.RISING,                |
|                                   | 下降沿gpio.FALLING,               |
|                                   | 上升                              |
|                                   | 和下降都要gpio.BOTH.默认是RISING  |
+-----------------------------------+-----------------------------------+

.. _返回值-1:

返回值
~~~~~~

.. code:: lua

   -- 设置gpio17为输入
   gpio.setup(17, nil) 
   @usage 
   -- 设置gpio17为输出
   gpio.setup(17, 0) 
   @usage 
   -- 设置gpio27为中断
   gpio.setup(27, function(val) print("IRQ_27") end, gpio.RISING)

--------------

gpio.set(pin, value)
--------------------

设置管脚电平

.. _参数-1:

参数
~~~~

+------------+--------------------------------------------------------+
| 传入值类型 | 解释                                                   |
+============+========================================================+
| int        | pin 针脚编号,必须是数值                                |
+------------+--------------------------------------------------------+
| int        | value 电平, 可以是 高电平gpio.HIGH, 低电平gpio.LOW,    |
|            | 或者直接写数值1或0                                     |
+------------+--------------------------------------------------------+

.. _返回值-2:

返回值
~~~~~~

+------------+--------------------------------------------------------+
| 返回值类型 | 解释                                                   |
+============+========================================================+
| int        | pin 针脚编号,必须是数值                                |
+------------+--------------------------------------------------------+
| int        | value 电平, 可以是 高电平gpio.HIGH, 低电平gpio.LOW,    |
|            | 或者直接写数值1或0                                     |
+------------+--------------------------------------------------------+

.. _返回值-3:

返回值
~~~~~~

.. code:: lua

   -- 设置gpio17为低电平
   gpio.set(17, 0) 

--------------

gpio.get(pin)
-------------

获取管脚电平

.. _参数-2:

参数
~~~~

========== =======================
传入值类型 解释
========== =======================
int        pin 针脚编号,必须是数值
========== =======================

.. _返回值-4:

返回值
~~~~~~

========== =======================
返回值类型 解释
========== =======================
int        pin 针脚编号,必须是数值
========== =======================

.. _返回值-5:

返回值
~~~~~~

.. code:: lua

   -- 获取gpio17的当前电平
   gpio.get(17) 

--------------

gpio.close(pin)
---------------

关闭管脚功能(高阻输入态),关掉中断

.. _参数-3:

参数
~~~~

========== =======================
传入值类型 解释
========== =======================
int        pin 针脚编号,必须是数值
========== =======================

.. _返回值-6:

返回值
~~~~~~

========== =======================
返回值类型 解释
========== =======================
int        pin 针脚编号,必须是数值
========== =======================

.. _返回值-7:

返回值
~~~~~~

.. code:: lua

   -- 关闭gpio17
   gpio.close(17)

--------------

gpio.setDefaultPull(val)
------------------------

设置GPIO脚的默认上拉/下拉设置, 默认是平台自定义(一般为开漏).

.. _参数-4:

参数
~~~~

========== ============================
传入值类型 解释
========== ============================
int        val 0平台自定义,1上拉, 2下拉
========== ============================

.. _返回值-8:

返回值
~~~~~~

========== ============================
返回值类型 解释
========== ============================
int        val 0平台自定义,1上拉, 2下拉
========== ============================

.. _返回值-9:

返回值
~~~~~~

.. code:: lua

   -- 设置gpio.setup的pull默认值为上拉
   gpio.setDefaultPull(1)

--------------
