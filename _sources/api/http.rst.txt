http
====

执行http请求

http.req(url, params, cb)
-------------------------

发起一个http请求,推荐用http.get/post/put/delete方法

参数
~~~~

+------------+--------------------------------------------------------+
| 传入值类型 | 解释                                                   |
+============+========================================================+
| string     | 目标U                                                  |
|            | RL,需要是https://或者http://开头,否则将当成http://开头 |
+------------+--------------------------------------------------------+
| table      | 可选参数.                                              |
|            | method方                                               |
|            | 法,headers请求头,body数据,ca证书路径,timeout超时时长,  |
+------------+--------------------------------------------------------+
| function   | 回调方法                                               |
+------------+--------------------------------------------------------+

返回值
~~~~~~

+------------+--------------------------------------------------------+
| 返回值类型 | 解释                                                   |
+============+========================================================+
| string     | 目标U                                                  |
|            | RL,需要是https://或者http://开头,否则将当成http://开头 |
+------------+--------------------------------------------------------+
| table      | 可选参数.                                              |
|            | method方                                               |
|            | 法,headers请求头,body数据,ca证书路径,timeout超时时长,  |
+------------+--------------------------------------------------------+
| function   | 回调方法                                               |
+------------+--------------------------------------------------------+

.. _返回值-1:

返回值
~~~~~~

.. code:: lua

   -- GET请求
   http.req("http://www.baidu.com/", nil, function(ret, code, headers, body)
       log.info("http", ret, code, header, body)
   end) 

--------------

http.get(url, params, cb)
-------------------------

发起一个http get请求

.. _参数-1:

参数
~~~~

========== ============================================================
传入值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-2:

返回值
~~~~~~

========== ============================================================
返回值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-3:

返回值
~~~~~~

.. code:: lua

   -- GET请求
   http.get("http://www.baidu.com/", nil, function(ret, code, headers, body)
       log.info("http", ret, code, header, body)
   end) 

--------------

http.post(url, params, cb)
--------------------------

发起一个http post请求

.. _参数-2:

参数
~~~~

========== ============================================================
传入值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-4:

返回值
~~~~~~

========== ============================================================
返回值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-5:

返回值
~~~~~~

.. code:: lua

   -- POST请求
   http.post("http://www.baidu.com/", {body=json.encode(data)}, function(ret, code, headers, body)
       log.info("http", ret, code, header, body)
   end) 

--------------

http.put(url, params, cb)
-------------------------

发起一个http put请求

.. _参数-3:

参数
~~~~

========== ============================================================
传入值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-6:

返回值
~~~~~~

========== ============================================================
返回值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-7:

返回值
~~~~~~

.. code:: lua

   -- PUT请求
   http.put("http://www.baidu.com/", {body=json.encode(data)}, function(ret, code, headers, body)
       log.info("http", ret, code, header, body)
   end) 

--------------

http.delete(url, params, cb)
----------------------------

发起一个http delete请求

.. _参数-4:

参数
~~~~

========== ============================================================
传入值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-8:

返回值
~~~~~~

========== ============================================================
返回值类型 解释
========== ============================================================
string     目标URL,需要是https://或者http://开头,否则将当成http://开头
table      可选参数. headers请求头,body数据,ca证书路径,timeout超时时长,
function   回调方法
========== ============================================================

.. _返回值-9:

返回值
~~~~~~

.. code:: lua

   -- DELETE请求
   http.put("http://www.baidu.com/", nil, function(ret, code, headers, body)
       log.info("http", ret, code, header, body)
   end) 

--------------
